{% extends 'baseEnseignant.html.twig' %}

{% block ZoneGaucheSaisiesContraintesHebdos %}
{% include 'formulaireTit-contraintesHebdo-CarteHautGauche.html.twig'%}
</br>
{% include 'formulaireTit-contraintesHebdo-CarteBasGauche.html.twig'%}
{% endblock %}


{% block ZoneDroiteSaisiesContraintesHebdos %}
<div id="mySidenav" class="sidenav">

  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" id="close">&times;</a>
  <p id="nomcreneau">Nom du creneau</p>
  <input type="text" name="titre" id="titrevt">
  <button id="apply">Appliquer le titre</button>
  <button id="remove">Supprimer ce créneau</button>
</div>

<div id="hebdo"></div>
<center>
  <button id="submit">Enregistrer les modifications</button>
</center>
{% endblock %}








{% block ZoneGaucheSaisiesContraintesPonctuelles %}
3
{% endblock %}






{% block ZoneDroiteSaisiesContraintesPonctuelles %}
4
{% endblock %}



{% block javascripts %}
{{parent()}}
<script>
String.prototype.minsToHHMMSS = function() {
  var mins_num = parseFloat(this, 10); // don't forget the second param
  var hours = Math.floor(mins_num / 60);
  var minutes = Math.floor((mins_num - ((hours * 3600)) / 60));
  var seconds = Math.floor((mins_num * 60) - (hours * 3600) - (minutes * 60));

  // Appends 0 when unit is less than 10
  if (hours < 10) {
    hours = "0" + hours;
  }
  if (minutes < 10) {
    minutes = "0" + minutes;
  }
  if (seconds < 10) {
    seconds = "0" + seconds;
  }
  return hours + ':' + minutes + ':' + seconds;
}

function openNav() {
  document.getElementById("mySidenav").style.width = "250px";
  document.getElementById("main").style.marginRight = "250px";

}

/* Set the width of the side navigation to 0 and the left margin of the page content to 0 */
function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  document.getElementById("main").style.marginRight = "0";
}


function enregistrerUnCreneau(start, end, title, type) {

  $.ajax({
    url: "{{path("creneau_ajouter")}}",
    data: {
      startevt: start,
      endevt: end,
      titleevt: title,
      typeevt: type
    }, //données envoyées au serveur pour chaque événement
    type: "POST"
  });
}

function supprimerDesCreneaux(typeCreneau,idEnseignant) {

  $.ajax({
    url: "{{path("suppr_creneaux")}}",
    data: {
      type: typeCreneau,
      id: idEnseignant,
    },
    type: "POST"
  });
}

var echelle = "{{formulaireTitulaire.echelleCalendrier}}".minsToHHMMSS();
var heureDebut = "{{ formulaireTitulaire.heureDebutCalendrier|date("H:i:s")}}";
var heureFin = "{{formulaireTitulaire.heureFinCalendrier|date("H:i:s")}}";
var events = {{events|raw}};
</script>
{% endblock %}
